<!-- views/account/register.ejs -->
<!-- 
  The title is injected from the controller. 
  If you're using a layout, your <head> might already handle <%= title %>.
-->

<h1><%= title %></h1>

<!-- Flash Message Area -->
<!-- If using connect-flash or a similar system, you can display messages here -->
<% if (typeof message !== 'undefined') { %>
  <p class="flash-message"><%= message %></p>
<% } %>

<!-- Display Validation Errors -->
<% if (errors) { %>
  <ul class="notice">
    <% errors.array().forEach(error => { %>
      <li><%= error.msg %></li>
    <% }); %>
  </ul>
<% } %>

<!-- Registration Form -->
<form 
  action="/account/register" 
  method="post" 
  class="register-form" 
  id="register-form"
>
  <!-- First Name -->
  <label for="account_firstname">First name</label>
  <input 
    type="text" 
    id="account_firstname" 
    name="account_firstname" 
    placeholder="Enter your first name"
    required
  />

  <!-- Last Name -->
  <label for="account_lastname">Last name</label>
  <input 
    type="text" 
    id="account_lastname" 
    name="account_lastname" 
    placeholder="Enter your last name"
    required
  />

  <!-- Email Address -->
  <label for="account_email">Email address</label>
  <input 
    type="email" 
    id="account_email" 
    name="account_email" 
    placeholder="Enter your email address"
    required
  />

  <!-- Password -->
  <label for="account_password">Password</label>
  <!-- Password requirements reminder -->
  <div class="password-requirements">
    Password must be at least 12 characters and contain at least 1 number, 1 uppercase letter, and 1 special character.
  </div>
  <input 
    type="password" 
    id="account_password" 
    name="account_password" 
    placeholder="Enter a secure password"
    required
    pattern="^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9])(?!.*\s).{12,}$"
  />

  <!-- Optional Show/Hide Password Toggle -->
  <div>
    <input type="checkbox" id="togglePassword" />
    <label for="togglePassword">Show Password</label>
  </div>

  <button type="submit">Register</button>
</form>

<!-- Optional JavaScript for toggling password visibility -->
<script>
  const togglePassword = document.querySelector('#togglePassword');
  const passwordField = document.querySelector('#account_password');

  if (togglePassword && passwordField) {
    togglePassword.addEventListener('change', function () {
      if (this.checked) {
        passwordField.type = 'text';
      } else {
        passwordField.type = 'password';
      }
    });
  }
</script>